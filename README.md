# SparkSQL Challenge: Home Sales

This repository contains my work for the 22nd challenge of the UofT SCS edX Data Bootcamp.


## Background

The goal of this challenge is to utilize SparkSQL to determine key metrics about home sales data, as well as use Spark to create temporary views, partition the data, and cache and uncache temporary tables.

## Summary

This challenge was completed in a Google Colab notebook, `Home_Sales_colab.ipynb`. The necessary PySpark dependencies were imported and a SparkSession was initialized. After reading in the data from an AWS S3 bucket into a DataFrame, a temporary view of this DataFrame was created, called `home_sales`. This temporary table was queried to answer the following questions:

1. What is the average price of a four-bedroom house sold for each year?
- 2019: $300,263.70
- 2020: $298,353.78
- 2021: $301,819.44
- 2022: $296,363.88

2. What is the average price of a home for each year it was built that has three bedrooms and three bathrooms?
- 2010: $292,859.62
- 2011: $291,117.47
- 2012: $293,683.19
- 2013: $295,962.27
- 2014: $290,852.27
- 2015: $288,770.30
- 2016: $290,555,07
- 2017: $292,676.79

3. What is the average price of a home for each year that has three bedrooms, three bathrooms, two floors, and is greater than or equal to 2,000 square feet?
- 2010: $285,010.22
- 2011: $276,553.81
- 2012: $307,539.97
- 2013: $303,676.79
- 2014: $298,264.72
- 2015: $297,609.97
- 2016: $293,965.10
- 2017: $280,317.58

4. What is the 'view' rating for the average price for homes that are greater than or equal to $350,000?

After these queries were completed, a cache of the temporary `home_sales` table was created and validated. The query for question 4 above was run on the cached temporary table while computing the run time. The query ran on the cached temporary table took 0.46 seconds to compute, while the same query ran on the uncached temporary table took 0.97 seconds to compute.

A partition of the dataset by the `date_built` field was created and the formatted parquet data was read, after which a temporary table of this data was also created. The query for question 4 was run on the parquet temporary table while computing the run time. The query on the cached temporary table took 0.46 seconds to compute, while the same query on the parquet temporary table took 1.22 seconds to compute.

Lastly, the `home_sales` temporary table was uncached and verified.

## Resources

Data for this dataset was generated by edX Boot Camps LLC, and is intended for educational purposes only.